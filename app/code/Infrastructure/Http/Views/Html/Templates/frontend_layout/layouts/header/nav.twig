{% set qm = meta_data.query_metadata %}
<!-- Urls -->
{% set linkUrl = u.fromArray(['root']) ~ '/' %}
{% set urlRoot = urlbuilder.fromArray(['root']) %}
{% set searchUrl = u.fromArray(['root', 'search']) %}
{% set urlLogout = urlbuilder.fromArray(['root', 'logout']) %}
{% set urlLogin = urlbuilder.fromArray(['root', 'login']) %}
{% set urlSitemap = urlbuilder.fromArray(['root', 'sitemap']) %}
<!-- Blog -->
{% set latestUrl = u.fromArray(['root', 'article']) %}
{% set trafficUrl = u.fromArray(['root', 'category', 'traffic']) %}
{% set adminUrl = u.fromArray(['root', 'category', 'administrative-process']) %}
{% set militaryUrl = u.fromArray(['root', 'category', 'military-law']) %}
{% set categoryUrl = u.fromArray(['root', 'category']) %}
<nav class="navbar navbar-expand-lg navbar-light p-0">
    <div class="container-lg d-block p-0">
        <div class="d-flex d-lg-none justify-content-between p-2 background-nav-container">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="link-none h1 d-lg-none" href="{{ urlRoot }}">{{translate.t('header.logo')}}</a>
        </div>
        <div class="collapse navbar-collapse bg-white p-2 justify-content-center" id="navbarSupportedContent">
            <ul class="navbar-nav">
                <!-- About -->
                <li class="nav-item">
                    <a class="nav-link" href="{{ linkUrl ~ 'about' }}">{{ translate.t('footer.links.about') }}</a>
                </li>
                <!-- Services -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        {{ translate.t('Services') }}
                    </a>
                    <ul class="dropdown-menu background-nav-dropdown" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="{{ linkUrl ~ 'commercial-offer' }}">{{ translate.t('Legal Support') }}</a></li>                        
                        <li><a class="dropdown-item" href="{{ linkUrl ~ 'training' }}">{{ translate.t('footer.links.training') }}</a></li>
                        <li><a class="dropdown-item" href="{{ linkUrl ~ 'exams' }}">{{ translate.t('footer.links.exams') }}</a></li>                                    
                        <li><a class="dropdown-item" href="{{ linkUrl ~ 'attorney-license' }}">{{ translate.t('footer.links.attorney-license') }}</a></li>
                        <li><a class="dropdown-item" href="{{ linkUrl ~ 'special-offers' }}">{{ translate.t('footer.links.special.offers') }}<small class="color-secondary">
                                    hot</small></a></li>                        
                    </ul>
                </li>
                <!-- Blog -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        {{ translate.t('Blog') }}
                    </a>
                    <ul class="dropdown-menu background-nav-dropdown" aria-labelledby="navbarDropdown">

                        <!-- Latest -->
                        <li class="nav-item">
                            <a class="dropdown-item" href="{{ latestUrl }}">{{ translate.t('menu.latest') }}</a>
                        </li>

                        <!-- Administrative process -->
                       <li class="nav-item">
                            <a class="dropdown-item" href="{{ adminUrl }}">{{ translate.t('menu.administrative-process') }}</a>
                        </li>

                        <!-- Trafic -->
                       <li class="nav-item">
                            <a class="dropdown-item" href="{{ trafficUrl }}">{{ translate.t('menu.traffic') }}</a>
                        </li>

                        <!-- Military -->
                       <li class="nav-item">
                            <a class="dropdown-item" href="{{ militaryUrl }}">{{ translate.t('menu.military-law') }}</a>
                        </li>                        
                       <li class="nav-item">
                            <a class="dropdown-item" href="{{ categoryUrl }}">{{ translate.t('menu.categories') }}</a>
                        </li> 
                    </ul>
                </li>
                <!-- Contacts -->
                <li class="nav-item">
                    <a class="nav-link" href="{{ linkUrl ~ 'contacts' }}">{{ translate.t('footer.links.contacts') }}</a>
                </li>
            </ul>
            <!-- Search -->
            <form class="api-header-search-form d-flex my-2 my-lg-0" method="get" action="{{ searchUrl }}">
                <input class="api-header-search-query form-control me-2" type="text" name="{{ qm.nameField }}" placeholder="{{ translate.t('Search') }}" aria-label="Search" maxlength="{{ qm.maxLength }}">
                <button class="api-header-search-btn btn btn-outline-secondary search-btn px-3" type="submit"></button>
            </form>
            <script type="module" src="/media/js/frontend/header/search/index.js"></script>
            <div class="d-lg-none d-block">
                <!-- Sitemap -->
                <div>
                    <a class="link-none" href="{{ urlSitemap }}">
                        {{ translate.t('header.link.sitemap') }}
                    </a>
                </div>
                <!-- Language -->
                <div class="py-2">
                    <label for="nav-language">{{ t.t('Language') }}:</label>
                    <select id="nav-language" class="language p-2 bg-white" style="border: 0" disabled="0">
                        {% for l in languages %}
                            {% set selected = '' %}
                            {% set disabled = '' %}
                            {% set value = '' %}
                            {% if l == language %}
                                {% set selected = 'selected="true"' %}
                                {% set disabled = 'disabled' %}
                            {% else %}
                                {% set value = su.withRoot(l) %}
                            {% endif %}
                            <option value="{{ value }}" {{disabled}} {{selected}}>{{translate.translate('global.language', l)}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <div class="header-user-notloggedin">
                        <a class="link-none" href="{{ urlLogin }}">
                            <button class="btn border w-100">
                                {{translate.t('header.sing_in')}}
                            </button>
                        </a>
                    </div>
                    <div class="header-user-loggedin justify-content-between" style="display:none">
                        <a class="link-none" href="{{ accountUrl }}">
                            <span class="user-name-field"></span>
                        </a>
                        <form class="header-user-form-logout" action="{{ urlLogout }}" method="post">
                            <u>{{ t.t('logout') }}</u>
                        </form>
                    </div>
                </div>
                <hr class="mt-3">
            </div>
        </div>
    </div>
</nav>