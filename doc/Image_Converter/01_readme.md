# Image Converter

Site uses image system:

- Article, Catalog pages shows `<picture>` tag with `srcset`
- Images are generated by controller `img.php` placed in [public folder](../../public/http/)
- The `controller` takes `image id`, `width`, `height` and `image type` from the client. Then it finds original big(nice) image in the storage and returns a resized copy.

## Request format

Query string looks like `id=1&type=webp&width=576&height=384`, where:

- id - an image id in the storage
- type - image type
- width - image width
- height - image height

### type

Allowed types: webp

### Width and heght

Width and heght sized a restricted with a small list of numbers - 384, 576, 720, 1080 etc.

## Cache

Image system is built with `cache` based on `Postgresql` database. When request is comes, fist of all `controller` look in the database for requested image. If it is, a `cached copy` returned. Otherwise `controller` pass parameters forward to the `Image converter` service for further processing.
